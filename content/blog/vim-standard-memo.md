---
title: "Vim標準機能で使いたいものメモ"
description: "使い慣れてきた頃に知って驚いた、vimの便利機能を紹介します！"
published: true
date: 2026-01-11
tags:
  - vim
  - tools
layout: default
---
## コピー&ペースト系

```vim
:%y
```
バッファ全体をヤンクする。
コマンドラインモードの`%`で全体選択してヤンク（コピー）する

---
## 操作系

- 毎回`nvim .`で起動するのをやめ、`<C-z>`と`fg`を使う
  - 参考: [LinuxターミナルとVimエディター間を行き来する](https://ylabdesk.com/vim-my-command-list#linux%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%A8vim%E3%82%A8%E3%83%87%E3%82%A3%E3%82%BF%E3%83%BC%E9%96%93%E3%82%92%E8%A1%8C%E3%81%8D%E6%9D%A5%E3%81%99%E3%82%8B)
- `g<C-a>`: 矩形選択にて数字部分を選択してから実行すると、連番を作成する
  * 参考: [中級 Vim 操作](https://zenn.dev/vim_jp/articles/2024-06-05-vim-middle-class-features)
- 矩形選択で`I`: 選択範囲に一括でインサート
- `:sort`: 並び替え（`:sort u`でユニークな行のみを並び替える）

---
## 検索系

- `/first\|second`: 複数の文字列を検索する
- `;` / `,`:  `f[char]`で`[char]`に移動したとき、次 or 前 の文字に移動する
- `<C-r>/`: （コマンドラインモードのみ）前回の検索文字列を挿入する

---
## コマンドラインモード

- `:%s/\(.*\)$/new_\1/g`: 全ての行行頭に`new_`をつける
  * `\1`という正規表現で、1番目にマッチした文字列を指定できる
- `:g/[pattern]/d`: ファイル全体から `[pattern]` にマッチする行をすべて削除する
  * `g` (グローバル) コマンドと `d` (削除) コマンドの組み合わせ
- `:v/[pattern]/d`:  `[pattern]` にマッチしない行をすべて削除する
  * `v` (インバート) コマンドと `d` コマンドの組み合わせ
  * 特定の行だけを残したい場合に便利
  * ex) `:v/./d` -> 空白行を削除する
- `:範囲 normal コマンド`: 指定した範囲の行に対して、ノーマルモードのコマンドを実行する
  * ex1) `:10,20 normal I// `
    + 10行目から20行目までの各行の先頭に `// ` を挿入
  * ex2) `:'<,'> normal .` 
    + ビジュアル選択した範囲の各行に対して、直前のノーマルモードでの変更を繰り返す

---
## マクロの記録・使用

基本操作
1. `q`で`[char]`に記録を開始する
2. 記録したいマクロ操作を実行する
3. `q`で記録を終了する
4. `@[char]`でレジスタ`[char]`に記録されたマクロを実行する

詳細
- `@@`: 最後に実行したマクロを再度実行
- `5@a`: レジスタ`a`のマクロを5回実行

---

### その他参考

- [Vimで変態テキスト処理！シェルコマンドを使い倒す - DevelopersIO](https://dev.classmethod.jp/articles/vim-use-shellcommands/)
- [中級 Vim 操作](https://zenn.dev/vim_jp/articles/2024-06-05-vim-middle-class-features)
- [Vimのwとrの便利Tips](https://zenn.dev/skanehira/articles/2020-10-05-vim-about-rw)

